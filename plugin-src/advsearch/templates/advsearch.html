<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:py="http://genshi.edgewall.org/"
	  xmlns:i18n="http://genshi.edgewall.org/i18n"
	  xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="layout.html" />
  <head>
	<title>Search<py:if test="q"> Results</py:if></title>
  </head>
  <body>
	<div id="content" class="search">

	  <h1><label for="q">${_('Advanced Search')}</label></h1>
	  <form id="fullsearch" action="${href.advsearch()}" method="get">
		<p>
		  <input type="text" id="q" name="q" size="40" value="${q}" />
		  <input type="hidden" name="noquickjump" value="1" />
		  <input type="submit" value="${_('Search')}" />
		</p>

		<fieldset>
		  <legend>${_('Source(s)')}:</legend>
		  <py:for each="filter in source_filters">
			<input type="checkbox" id="${filter.name}" name="${filter.name}"
				   checked="${filter.active and 'checked' or None}" />
			<label for="${filter.name}">${filter.name}</label>
		  </py:for>
		</fieldset>

		<fieldset>
		  <legend>${_('Author(s)')}:</legend>
		  <py:for each="filter in author">
		  	<input type="text" name="author" value="${filter}" />
		  </py:for>
		  <input type="text" name="author" />
		</fieldset>

		<fieldset>
		  <legend>${_('Date Range')}:</legend>
		  <label for="date_start">Start</label>
		  <input type="text" name="date_start" value="${date_start}" />
		  <label for="date_end">End</label>
		  <input type="text" name="date_end" value="${date_end}" />
		</fieldset>

	  </form>

	  <py:if test="results or quickjump"><hr />
		<h2 py:if="results">
		  Results <span class="numresults">(${len(results)})</span>
		</h2>
		<xi:include py:with="paginator = results" href="page_index.html" />
		<div>
		  <dl id="results">
			<py:if test="quickjump">
			  <dt id="quickjump">
				<a href="${quickjump.href}" i18n:msg="name">Quickjump to ${quickjump.name}</a>
			  </dt>
			  <dd>${quickjump.description}</dd>
			</py:if>
			<py:for each="result in results">
			  <dt><a href="${result.href}" class="searchable">${result.title}</a></dt>
			  <dd class="searchable">${result.excerpt}</dd>
			  <dd>
				<py:if test="result.author"><span class="author" i18n:msg="author">By ${format_author(result.author)}</span> &mdash;</py:if>
				<span class="date">${result.date}</span>
			  </dd>
			</py:for>
		  </dl>
		</div>
		<xi:include py:with="paginator = results" href="page_index.html" />
	  </py:if>

	  <div id="notfound" py:if="query and not (results or quickjump)">
		No matches found.
	  </div>

	  <div id="help">
			Return to classic <a href="${href.search()}">${_('Search')}</a>.<br />
			See <a href="${href.wiki('TracAdvancedSearch')}">TracAdvancedSearchPlugin</a>
				for help on searching.
	  </div>

	</div>
  </body>
</html>
